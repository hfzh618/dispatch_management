@layout("/common/_container.html",{js:["/assets/modular/system/map/market-screen.js"]}){

<!--显示门店地图-->
<link rel="stylesheet" href="https://cache.amap.com/lbs/static/main1119.css"/>
<style type="text/css">
    #panel {
        position: absolute;
        background-color: white;
        max-height: 90%;
        overflow-y: auto;
        top: 10px;
        right: 10px;
        width: 280px;
    }
</style>

<div class="layui-body-header">
    <span class="layui-body-header-title">态势大屏可视化</span>
</div>

<div class="container-flex" tabindex="0" hidefocus="true">

    <!--左边的部分-->

    <div class="box-left">

        <!-- 左上 -->

        <div class="left-top">
            <div class="current-num">
                <div>当前班列数</div>
                <p>2</p>
            </div>
        </div>

        <!-- 左中 -->
        <!-- pie data需要自己填充 -->

        <div class="left-center">
            <div class="title-box">
                <h6>派件入库量占比</h6>
            </div>
            <div class="chart-box pie-chart">
                <div id="pie"></div>
                <div>
                    <div class="pie-data">

                    </div>
                </div>
            </div>
        </div>

        <!-- 左下 -->
        <!-- 包含地图 需要用js刷新 -->

        <div class="left-bottom" class="select">
            <div class="title-box">
                <h6>广东省寄派件数据</h6>
                <img class="line-img" src="https://s1.ax1x.com/2020/05/15/YryQpT.png" alt="">
                <button id="filBtn"><img src="https://s1.ax1x.com/2020/05/15/YryNA1.png" alt="">筛选</button>
            </div>
            <div class="chart-box">
                <div class="filter-con" id="filCon" data-type="1">
                    <div class="select" tabindex="0" hidefocus="true">
                        <div class="select-div">
                            派件
                        </div>
                        <ul class="select-ul">
                            <li class="active" data-value="1">派件</li>
                            <li data-value="2">寄件</li>
                        </ul>
                    </div>
                    <div class="select" tabindex="0" hidefocus="true">
                        <div class="select-div">
                            公司
                        </div>
                        <ul class="select-ul company">
                            <li class="active" data-value="">公司</li>
                            <li data-value="1">顺丰</li>
                            <li data-value="2">京东</li>
                            <li data-value="2">EMS</li>
                        </ul>
                    </div>
                    <div class="select" tabindex="0" hidefocus="true">
                        <div class="select-div">
                            快件类型
                        </div>
                        <ul class="select-ul">
                            <li class="active" data-value="">快件类型</li>
                            <li data-value="0">文件</li>
                            <li data-value="1">物品</li>
                        </ul>
                    </div>
                </div>
                <div id="gdMap" class="gd-map"></div>
            </div>
        </div>
    </div>

    <!-- 中间的部分-->

    <div class="box-center">

        <!--中间的顶部-->
        <!--显示题目和-->

        <div class="center-top">
            <h1>物流班列可视化中心</h1>
        </div>

        <!--中间的中间-->
        <!--显示天气和筛选信息-->

        <div class="center-center">
            <div class="weather-box">
                <div class="data">
                    <p class="time" id="time">00:00:00</p>
                    <p id="date"></p>
                </div>
                <div class="weather">
                    <img id="weatherImg" src="https://s1.ax1x.com/2020/05/15/Yry6HA.png" alt="">
                    <div id="weather">
                        <p class="active">多云</p>
                        <p>16-22℃</p>
                        <p>上海市</p>
                    </div>
                </div>
            </div>
            <img src="https://s1.ax1x.com/2020/05/15/Yrynkq.png" alt="">
            <div class="select-box">
                <!--<ul id="barType">-->
                    <!--<li class="active" data-value="1">派件</li>-->
                    <!--<li data-value="2">寄件</li>-->
                <!--</ul>-->
                <div data-type="2">
                    <div class="select" tabindex="0" hidefocus="true">
                        <div class="select-div">
                            班列选择
                        </div>
                        <ul class="select-ul company">
                            <!--<li class="active" data-value=""></li>-->
                            <li data-value="1">1号班列</li>
                            <li data-value="2">2号班列</li>
                        </ul>
                    </div>
                    <div class="select" tabindex="0" hidefocus="true">
                        <div class="select-div">
                            车辆选择
                        </div>
                        <ul class="select-ul">
                            <!--<li class="active" data-value="">快件类型</li>-->
                            <li data-value="0">沪A4355C</li>
                            <li data-value="1">沪B5555D</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!--中间的底部-->
        <!--存放门店信息-->

        <div class="center-bottom">

            <p>地图</p>
            <div class="input-card" id="container"></div>

            <!--<div id="panel"></div>-->
        </div>

    </div>

    <!--右边-->

    <div class="box-right">

        <!--右边的上边-->

        <div class="right-top">
            <div class="title-box">
                <h6 id="barTitle">派件数据</h6>
                <img class="line-img" src="https://s1.ax1x.com/2020/05/15/YryQpT.png" alt="">
                <button data-state=1 id="tabBtn"><img src="https://s1.ax1x.com/2020/05/15/YryAXQ.png" alt=""><span>图表</span></button>
            </div>
            <p class="unit">单位：件</p>
            <div class="chart-box">
                <div id="chart3" style="width:100%;height:100%;"></div>
            </div>
            <div class="data-box" style="display:none;">
                <table class="table1">
                    <tr>
                        <td>入库件</td>
                        <td colspan="3" class="table-data dph-data1">0</td>
                    </tr>
                    <tr class="bg-color">
                        <td rowspan="2">在库件</td>
                        <td rowspan="2" class="table-data dph-data2">0</td>
                        <td>正常件</td>
                        <td class="table-data dph-data3">0</td>
                    </tr>
                    <tr class="bg-color">
                        <td>滞留件</td>
                        <td class="table-data dph-data5">0</td>
                    </tr>
                    <tr>
                        <td rowspan="2">出库件</td>
                        <td rowspan="2" class="dph-data6">0</td>
                        <td>派送件</td>
                        <td class="table-data dph-data7">0</td>
                    </tr>
                    <tr>
                        <td>自提件</td>
                        <td class="table-data dph-data8">0</td>
                    </tr>
                    <tr class="bg-color">
                        <td>退签件</td>
                        <td colspan="3" class="table-data dph-data9">0</td>
                    </tr>
                    <tr>
                        <td>丢失件</td>
                        <td colspan="3" class="table-data dph-data4">0</td>
                    </tr>
                </table>
                <table class="table1" style="display:none;">
                    <tr>
                        <td>入库件</td>
                        <td colspan="3" class="table-data mail-data1">1</td>
                    </tr>
                    <tr class="bg-color">
                        <td rowspan="2">在库件</td>
                        <td rowspan="2" class="table-data mail-data2">1</td>
                        <td>正常件</td>
                        <td class="table-data mail-data7">1</td>
                    </tr>
                    <tr class="bg-color">
                        <td>滞留件</td>
                        <td class="table-data mail-data4">1</td>
                    </tr>

                    <tr>
                        <td>出库件</td>
                        <td colspan="3" class="mail-data6">1</td>
                    </tr>
                    <tr class="bg-color">
                        <td>丢失件</td>
                        <td colspan="3" class="mail-data3">1</td>
                    </tr>
                    <tr>
                        <td>撤销件</td>
                        <td colspan="3" class="table-data mail-data5">1</td>
                    </tr>
                </table>
            </div>
        </div>

        <!--右边的中间-->

        <div class="right-center">
            <div class="title-box">
                <p id="switchBtn"><span class="active" data-dataType="income">收入数据</span><img class="line-img" src="https://s1.ax1x.com/2020/05/15/YryQpT.png" alt=""><span data-dataType="expend">支出数据</span></p>
                <img class="line-img" src="https://s1.ax1x.com/2020/05/15/YryQpT.png" alt="">
                <button id="dateBtn"><img src="https://s1.ax1x.com/2020/05/15/YryZ0s.png" alt="">日期</button>
            </div>
            <div class="data-box">
                <p class="data-number" id="totalProfit">123,456.5元</p>
                <div class="time-box" id="timeBox">
                    <div class="time-div">
                        <input class="time-input" type="text" value="" id="startTime">
                        <img src="https://s1.ax1x.com/2020/05/15/YryUtx.png" alt="">
                    </div>
                    <div class="time-div end">
                        <input class="time-input" type="text" value="" id="endTime">
                        <img src="https://s1.ax1x.com/2020/05/15/YryUtx.png" alt="">
                    </div>
                </div>
            </div>
        </div>

        <!--右边的下边-->

        <div class="right-bottom">
            <div class="title-box">
                <button id="setBtn"><img src="https://s1.ax1x.com/2020/05/15/Yryah6.png" alt="">设置</button>
            </div>
            <div class="data-box">
                <div class="settings-box">
                    <p><img src="https://s1.ax1x.com/2020/05/15/Yryw9K.png" alt="">今日值班：<span id="name_a"></span><span id="date_a"></span></p>
                    <p><img src="https://s1.ax1x.com/2020/05/15/YryGnJ.png" alt="">负责人：<span id="lea_a"></span></p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-screen">
    <div class="pop-up">
        <span class="close-pop"></span>
        <h2 class="title">当前到件量</h2>
        <div class="pop-data-box">
            <p>123,456,789</p>
        </div>
    </div>

    <div class="pop-up">
        <span class="close-pop"></span>
        <h2 class="title">派件入库量占比</h2>
        <div class="chart-box pie-chart">
            <div id="pie1"></div>
            <div>
                <div class="pie-data">
                </div>
            </div>
        </div>
    </div>

    <div class="pop-up">
        <span class="close-pop"></span>
        <h2 class="title">广东省寄派件数据 </h2>
        <div class="filter-con pop-filter" style="display:flex" data-type="3">
            <div class="select" tabindex="0" hidefocus="true">
                <div class="select-div">
                    派件
                </div>
                <ul class="select-ul">
                    <li class="active" data-value="1">派件</li>
                    <li data-value="2">寄件</li>
                </ul>
            </div>
            <div class="select" tabindex="0" hidefocus="true">
                <div class="select-div">
                    公司
                </div>
                <ul class="select-ul company">
                    <li class="active" data-value="">公司</li>
                    <li data-value="1">顺丰</li>
                    <li data-value="2">京东</li>
                    <li data-value="2">EMS</li>
                </ul>
            </div>
            <div class="select" tabindex="0" hidefocus="true">
                <div class="select-div">
                    快件类型
                </div>
                <ul class="select-ul">
                    <li class="active" data-value="">快件类型</li>
                    <li data-value="0">文件</li>
                    <li data-value="1">物品</li>
                </ul>
            </div>
        </div>
        <div class="chart-box pop-chart">
            <div id="gdMaps" class="gd-map"></div>
        </div>
    </div>

    <div class="pop-up">
        <span class="close-pop"></span>
        <div class="filter-con pop-filters" style="display:flex" data-type="4">
            <div class="select-pop" tabindex="0" hidefocus="true">
                <ul id="barTypes">
                    <li class="active" data-value="1">派件</li>
                    <li data-value="2">寄件</li>
                </ul>
            </div>
            <div class="select" tabindex="0" hidefocus="true">
                <div class="select-div">
                    公司
                </div>
                <ul class="select-ul company">
                    <li class="active" data-value="">公司</li>
                    <li data-value="1">顺丰</li>
                    <li data-value="2">京东</li>
                    <li data-value="2">EMS</li>
                </ul>
            </div>
            <div class="select" tabindex="0" hidefocus="true">
                <div class="select-div">
                    快件类型
                </div>
                <ul class="select-ul">
                    <li class="active" data-value="">快件类型</li>
                    <li data-value="0">文件</li>
                    <li data-value="1">物品</li>
                </ul>
            </div>
        </div>
        <div class="cont-div">
            <div class="chart-box pop-charts">
                <div id="chart4s" style="width:100%;height:95%;"></div>
            </div>
        </div>
        <div class="cont-div">
            <h2 class="title" id="barTitles">派件数据</h2>
            <button class="btn-class" data-state=1 id="tabBtns"><img src="https://s1.ax1x.com/2020/05/15/YryAXQ.png" alt=""><span>图表</span></button>
            <div class="chart-box pop-chart">
                <div id="chart3s" style="width:100%;height:90%;"></div>
            </div>
            <div class="data-box" style="top:25%;width:8.6rem;display:none;">
                <table class="table2">
                    <tr>
                        <td>入库件</td>
                        <td colspan="3" class="table-data dph-data1">0</td>
                    </tr>
                    <tr class="bg-color">
                        <td rowspan="2">在库件</td>
                        <td rowspan="2" class="table-data dph-data2">0</td>
                        <td>正常件</td>
                        <td class="table-data dph-data3">0</td>
                    </tr>
                    <tr class="bg-color">
                        <td>滞留件</td>
                        <td class="table-data dph-data5">0</td>
                    </tr>
                    <tr>
                        <td rowspan="2">出库件</td>
                        <td rowspan="2" class="dph-data6">0</td>
                        <td>派送件</td>
                        <td class="table-data dph-data7">0</td>
                    </tr>
                    <tr>
                        <td>自提件</td>
                        <td class="table-data dph-data8">0</td>
                    </tr>
                    <tr class="bg-color">
                        <td>退签件</td>
                        <td colspan="3" class="table-data dph-data9">0</td>
                    </tr>
                    <tr>
                        <td>丢失件</td>
                        <td colspan="3" class="table-data dph-data4">0</td>
                    </tr>
                </table>
                <table class="table2" style="display:none;">
                    <tr>
                        <td>入库件</td>
                        <td colspan="3" class="table-data mail-data1">0</td>
                    </tr>
                    <tr class="bg-color">
                        <td rowspan="2">在库件</td>
                        <td rowspan="2" class="table-data mail-data2">0</td>
                        <td>正常件</td>
                        <td class="table-data mail-data7">0</td>
                    </tr>
                    <tr class="bg-color">
                        <td>滞留件</td>
                        <td class="table-data mail-data4">0</td>
                    </tr>

                    <tr>
                        <td>出库件</td>
                        <td colspan="3" class="mail-data6">0</td>
                    </tr>
                    <tr class="bg-color">
                        <td>丢失件</td>
                        <td colspan="3" class="mail-data3">0</td>
                    </tr>
                    <tr>
                        <td>撤销件</td>
                        <td colspan="3" class="table-data mail-data5">0</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="cont-div">
            <h2 class="title" id="titles"></h2>
            <button class="btn-class" id="dateBtns"><img src="https://s1.ax1x.com/2020/05/15/YryZ0s.png" alt="">日期</button>
            <div class="data-box  pop-time">
                <div class="time-box" id="timeBoxs">
                    <div class="time-div">
                        <input class="time-input" type="text" value="" id="startTimes">
                        <img src="https://s1.ax1x.com/2020/05/15/YryNA1.png" alt="">
                    </div>
                    <div class="time-div end">
                        <input class="time-input" type="text" value="" id="endTimes">
                        <img src="https://s1.ax1x.com/2020/05/15/YryNA1.png" alt="">
                    </div>
                </div>
            </div>
            <div class="pop-data-box" id="totalProfits">
                <p></p>
            </div>
        </div>
        <div class="pop-data">
            <div class="city-data">
                <div class="city-box">
                    <p id="titleQs"><span>全网</span>到珠海</p>
                    <ul class="city-btn" data-city="2">
                        <li class="active">全网</li>
                        <li>ABCDE</li>
                        <li>FGHIJ</li>
                        <li>KLMNO</li>
                        <li>PQRST</li>
                        <li>UVWXYZ</li>
                    </ul>
                    <ul class="city-div" id="citys">

                    </ul>
                </div>
                <ul class="ranking-box">
                    <li><span></span>
                        <p>城市</p>
                        <p>派件</p>
                    </li>
                    <!--                        <li><span>1</span><p>上海</p><p>1sss25(万件)</p></li>-->
                </ul>

            </div>
        </div>
    </div>
    <div class="pop-up">
        <span class="close-pop"></span>
        <h2 class="title">设置</h2>
        <div class="set-div">
            <div class="set-box">
                <label class="four-f" for="">排班日期</label>
                <div class="time-div">
                    <input class="time-input" type="text" value="" id="times">
                    <img src="https://s1.ax1x.com/2020/05/15/YryUtx.png" alt="">
                </div>
            </div>
            <div class="set-box">
                <label for="">值班人</label>
                <input type="text" value="">
                <button class="plus" id="addT"></button>
                <button class="mineus" id="mineusT" style="display:none;"></button>
            </div>
            <div class="set-box">
                <label for="">负责人</label>
                <input type="text" value="">
                <button class="plus" id="addL"></button>
                <button class="mineus" id="mineusL" style="display:none;"></button>
                <button class="add-btn" id="addSet"><img src="https://s1.ax1x.com/2020/05/15/YryJB9.png" alt="">添加</button>
            </div>
            <table class="table3">
                <thead>
                <tr>
                    <th>值班人</th>
                    <th>排班日期</th>
                    <th>负责人</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody id="tList">
                <!--
                                        <tr>
                                            <td colspan="4">
                                                <p style="width:9.6rem;">暂无数据</p>
                                            </td>
                                        </tr>
                -->
                <tr>
                    <td>1</td>
                    <td>1</td>
                    <td>1</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>1</td>
                    <td>1</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>1</td>
                    <td>1</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>1</td>
                    <td>1</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>1</td>
                    <td>1</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>1</td>
                    <td>1</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>1</td>
                    <td>1</td>
                    <td>1</td>
                </tr>
                </tbody>
            </table>
            <div class="pages-div" class="mineus">
                <button class="prev"></button>
                <p id="page"><span>0</span>/<span>0</span></p>
                <button class="next"></button>
                <input type="number">
                <button class="skip">跳转</button>
            </div>
        </div>
        <div class="tishi">日期已存在!</div>
        <div class="edit-div" style="display:none;">
            <h4>编辑</h4>
            <span class="close-edit"></span>
            <div class="set-box">
                <label for="">值班人</label>
                <input class="input-edit" id="editT" type="text" value="">
            </div>
            <div class="set-box">
                <label for="">负责人</label>
                <input class="input-edit" id="editL" type="text" value="">
            </div>
            <div class="set-box edit-box">
                <button id="qxEdit">取消</button>
                <button id="qdEdit">确定</button>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="/assets/modular/system/bigscreen/js/rem.js"></script>
<script type="text/javascript" src="/assets/modular/system/bigscreen/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="/assets/modular/system/bigscreen/js/layer/layer.min.js"></script>
<script type="text/javascript" src="/assets/modular/system/bigscreen/js/layer/laydate/laydate.js"></script>
<script type="text/javascript" src="/assets/modular/system/bigscreen/js/echarts.min.js"></script>
<script type="text/javascript" src="/assets/modular/system/bigscreen/js/china.js"></script>
<script type="text/javascript" src="/assets/modular/system/bigscreen/js/data/guangdong.js"></script>
<script type="text/javascript" src="/assets/modular/system/bigscreen/js/base.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script>
<script src="https://cdn.bootcss.com/qs/6.5.1/qs.min.js"></script>

<!--地图部分-->
<script type="text/javascript" src="https://cache.amap.com/lbs/static/addToolbar.js"></script>
<script src="https://webapi.amap.com/maps?v=1.4.15&key=326c90e9d47f6a9710bc5e4594bb28f3&plugin=AMap.Autocomplete,AMap.PlaceSearch,AMap.Driving,AMap.Geocoder"></script>

<script>
    var map = new AMap.Map('container', {
        mapStyle: 'amap://styles/darkblue', //设置地图的显示样式
        resizeEnable: true, //是否监控地图容器尺寸变化
    });
    AMap.service(["AMap.PlaceSearch"], function() {
        //构造地点查询类
        var placeSearch = new AMap.PlaceSearch({
            pageSize: 10, // 单页显示结果条数
            pageIndex: 1, // 页码
            city: "021", // 兴趣点城市
            citylimit: true,  //是否强制限制在设置的城市内搜索
            map: map, // 展现结果的地图实例
            // panel: "panel", // 结果列表将在此容器中进行展示。
            autoFitView: true // 是否自动调整地图视野使绘制的 Marker点都处于视口的可见范围
        });
        //关键字查询
        placeSearch.search('联华超市');
    });

    function getDataFromWengpeng(routeId,carId,siteId,localSiteArr,expectedPath,oldCarMarker,oldSiteMarkers){
        var url = 'http://localhost:5006/algo3/'+routeId+'/'+carId+'/'+siteId;
        var train_seq,path;
        try {
            axios.get(url)
                .then(res => {
                    if(res.status === 200) {
                        res = res.data;
                        train_seq = res.train_seq;
                        var shop_names = res.shop_name;
                        var algo3 = res.algo3;
                        path = algo3[carId].path;
                        var obj = eval('(' + train_seq + ')');
                        //获得到商店名
                        var shop_obj = eval('(' + shop_names + ')');

                        if (siteId == 0){
                            console.log('已经到达了第1个网点');
                            console.log(train_seq);
                        }
                        //判断是否到达了最后的终点
                        if(path.length == 0){
                            console.log('已经到达了终点');
                            var title = '配送完毕</span>';
                            var content = [];
                            content.push("<img src='http://tpc.googlesyndication.com/simgad/5843493769827749134'>");
                            content.push("已经到达了终点");
                            //显示信息窗体
                            var infoWindow = new AMap.InfoWindow({
                                position:oldCarMarker.getPosition(),
                                isCustom: true,  //使用自定义窗体
                                content: createInfoWindow(title, content.join("<br/>")),
                                offset: new AMap.Pixel(16, -45)
                            });
                            infoWindow.open(map,oldCarMarker.getPosition());
                        }else{
                            //先把之前的路线和图标去掉
                            if (siteId != 0){
                                expectedPath.hide();
                                oldCarMarker.hide();
                                oldSiteMarkers.forEach(oldSiteMarker => {
                                    oldSiteMarker.hide();
                                });
                            }
                            var shop_name_arr = [];
                            path.forEach(path_item => {
                                var path_key = findKey(obj,path_item);
                                shop_name_arr.push(shop_obj[path_key]);
                            });
                            console.log('此时新的配送网点顺序为');
                            console.log(path);
                            console.log('此时的经纬度集合为');
                            var siteLngs = id2LngLat(path);
                            console.log(siteLngs);
                            console.log('门店显示在地图上');
                            var siteMarkers = site2markers(siteLngs,shop_name_arr);
                            //输入门店的经纬度进行扩充，得到最后的路径，并显示在地图上
                            //需要先把当前门店的经纬度加进来
                            siteLngs.unshift(localSiteArr);
                            var oldExpectedPath = siteIdsToRoutes(siteLngs,1);
                            var newSiteId = findKey(obj,path[0]);
                            console.log('此时的新的网点id为为'+newSiteId);
                            //生成汽车图标
                            var carMarker = new AMap.Marker({
                                map: map,
                                position: [121.274029,31.256625],
                                icon: "https://webapi.amap.com/images/car.png",
                                offset: new AMap.Pixel(-26, -13),
                                autoRotation: true,
                                angle: -90
                            });
                            carMarker.setLabel({
                                offset: new AMap.Pixel(20, 20),  //设置文本标注偏移量
                                content: "第1辆车",
                            });
                            //开始行走第一部分
                            var start = new AMap.LngLat(siteLngs[0][0], siteLngs[0][1]);
                            var end = new AMap.LngLat(siteLngs[1][0], siteLngs[1][1]);
                            var segmentRouteArr = routeArrExtendWebAPI(start, end);
                            var passed = showPath(segmentRouteArr, 1, "solid");
                            segmentAnimal(segmentRouteArr, carMarker, passed,newSiteId,siteMarkers,siteLngs[1],oldExpectedPath);
                        }

                    }
                })
                .catch(function (error) { // 请求失败处理
                    console.log(error);
                });
        } catch (e) {
            console.log(e);
            alert('请重试！');
        };


    }
</script>

<script type="text/javascript">
    $('document').ready(function () {
        $("body").css('visibility', 'visible');
        var localData = [$('#teacher').val(), $('#start').val() + '/' + $('#end').val(), $('#leader').val()]
        localStorage.setItem("data", localData);
        $('#conBtn').on('click', function () {
            localData = [$('#teacher').val(), $('#start').val() + '/' + $('#end').val(), $('#leader').val()]
            if (typeof (Storage) !== "undefined") {
                localStorage.setItem("data", localData);
                var arr = localStorage.getItem("data").split(',');
                $('#name_a').html(arr[0]);
                $('#date_a').html(arr[1]);
                $('#lea_a').html(arr[2]);
            }
        })
        $('#fangda').on('click', function () {
            if ($(this).siblings('ul').is(":hidden")) {
                $(this).addClass('active').siblings('ul').show();
            } else {
                $(this).removeClass('active').siblings('ul').hide();
            }
        })

        $('.modal-btn>li').on('click', function () {
            var index = $(this).index();
            if (index <= 2) {
                $('.container-screen').attr('style', 'visibility: visible').find('.pop-up').eq(index).attr('style', 'visibility: visible').siblings().attr('style', 'visibility: hidden');
            } else if (index > 2 && index < 5) {
                $('.container-screen').attr('style', 'visibility: visible').find('.pop-up').eq(3).attr('style', 'visibility: visible').siblings().attr('style', 'visibility: hidden');
                if (index != 3) {
                    $('.pop-data .ranking-box').hide();
                } else {
                    $('.pop-data .ranking-box').show();
                }
                $('.cont-div').eq(index - 3).attr('style', 'visibility: visible').siblings('.cont-div').attr('style', 'visibility: hidden');
            } else if (index == 5) {
                $('.container-screen').attr('style', 'visibility: visible').find('.pop-up').eq(3).attr('style', 'visibility: visible').siblings().attr('style', 'visibility: hidden');
                $('.pop-data .ranking-box').hide();
                if ($('#switchBtn').find('.active').data('datatype') == "income") {
                    $('#titles').html('收入数据');
                    $('#totalProfits').html('123,456.5元');
                    $('.cont-div').eq(2).attr('style', 'visibility: visible').siblings('.cont-div').attr('style', 'visibility: hidden');
                } else if ($('#switchBtn').find('.active').data('datatype') == 'expend') {
                    $('#titles').html('支出数据');
                    $('#totalProfits').html('32,111.4元');
                    $('.cont-div').eq(2).attr('style', 'visibility: visible').siblings('div').attr('style', 'visibility: hidden');
                }
            }
        })
    })
</script>


@}