@layout("/common/_container.html",{js:["/assets/modular/system/map/market-screen.js"]}){

<!--显示门店地图-->
<link rel="stylesheet" href="https://cache.amap.com/lbs/static/main1119.css"/>
<style type="text/css">
    #panel {
        position: absolute;
        background-color: blue;
        max-height: 90%;
        overflow-y: auto;
        top: 10px;
        right: 10px;
        width: 280px;
    }
    iframe {
        margin: 0 0;
        width: 100%;
        height: 100%;
    }
</style>

<div class="layui-body-header">
    <span class="layui-body-header-title">态势大屏可视化</span>
</div>

<div class="container-flex" tabindex="0" hidefocus="true">

    <!--左边的部分-->

    <div class="box-left">

        <!-- 左上 -->

        <div class="left-top">
            <div class="current-num">
                <div>当前门店数目</div>
                <p>1057</p>
            </div>
        </div>

        <!-- 左中 -->
        <!-- pie data需要自己填充 -->

        <div class="left-center">
            <div class="title-box">
                <h6>门店显示</h6>
            </div>
        </div>

        <!-- 左下 -->
        <!-- 包含地图 需要用js刷新 -->

        <div class="left-bottom" class="select">
            <div class="title-box">
                <h6>门店展示</h6>
            </div>
            <div>
                <div class="input-card" id="container"></div>

                <div id="panel"></div>
            </div>

        </div>


    </div>

    <!-- 中间的部分-->

    <div class="box-center">

        <!--中间的顶部-->
        <!--显示题目和-->

        <div class="center-top">
            <h1>物流班列可视化中心</h1>
        </div>

        <!--中间的中间-->
        <!--显示天气和筛选信息-->

        <div class="center-center">
            <div class="weather-box">
                <div class="data">
                    <p class="time" id="time">00:00:00</p>
                    <p id="date"></p>
                </div>
                <div class="weather">
                    <img id="weatherImg" src="https://s1.ax1x.com/2020/05/15/Yry6HA.png" alt="">
                    <div id="weather">
                        <p class="active">多云</p>
                        <p>16-22℃</p>
                        <p>上海市</p>
                    </div>
                </div>
            </div>
            <img src="https://s1.ax1x.com/2020/05/15/Yrynkq.png" alt="">
            <div class="current-num">
                <div>当前班列数</div>
                <p>2</p>
            </div>
            <img src="https://s1.ax1x.com/2020/05/15/Yrynkq.png" alt="">
        </div>

        <!--中间的底部-->
        <!--存放门店信息-->

        <div class="center-bottom">

            <iframe id="iframeId" frameborder=0 scrolling=auto src="http://localhost:5303/2" frameborder="0"></iframe>


            <!--<div id="panel"></div>-->
        </div>

    </div>

    <!--右边-->

    <div class="box-right">

        <!--右边的上边-->

        <div class="right-top">
            <div class="title-box">
                <h6 id="barTitle">订单排行</h6>
            </div>
            <table class="table1" >
                <colgroup>
                    <col width="50">
                    <col>
                    <col width="96">
                </colgroup>
                <thead>
                <tr style="background: none;color: #333;">
                    <th colspan="3">门店订单量排名</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><span class="layui-badge layui-bg-cyan">1</span></td>
                    <td>联华超市(六团店)</td>
                    <td>132</td>
                </tr>
                <tr>
                    <td><span class="layui-badge layui-bg-cyan">2</span></td>
                    <td>联华超市(浦东南路店)</td>
                    <td>111</td>
                </tr>
                <tr>
                    <td><span class="layui-badge layui-bg-cyan">3</span></td>
                    <td>联华超市(陈镇店)</td>
                    <td>98</td>
                </tr>
                <tr>
                    <td><span class="layui-badge layui-bg-gray">4</span></td>
                    <td>联华超市(瑞金医院店)</td>
                    <td>71</td>
                </tr>
                <tr>
                    <td><span class="layui-badge layui-bg-gray">5</span></td>
                    <td>联华超市(浦光店)</td>
                    <td>60</td>
                </tr>
                </tbody>
            </table>
        </div>


        <!--右边的中间-->

        <div class="right-center">
            <div class="title-box">
                <p id="switchBtn"><span class="active" data-dataType="income">司机信息</span><img class="line-img" src="https://s1.ax1x.com/2020/05/15/YryQpT.png" alt=""></p>
                <img class="line-img" src="https://s1.ax1x.com/2020/05/15/YryQpT.png" alt="">
            </div>
            <table class="table1" >
                <colgroup>
                    <col width="50">
                    <col>
                    <col width="96">
                </colgroup>
                <thead>
                <tr style="background: none;color: #333;">
                    <th colspan="3">司机信息统计</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><span class="layui-badge layui-bg-cyan">1</span></td>
                    <td>配送中</td>
                    <td>7</td>
                </tr>
                <tr>
                    <td><span class="layui-badge layui-bg-cyan">2</span></td>
                    <td>待命</td>
                    <td>280</td>
                </tr>
                <tr>
                    <td><span class="layui-badge layui-bg-cyan">3</span></td>
                    <td>休假中</td>
                    <td>15</td>
                </tr>
                </tbody>
            </table>
        </div>

        <!--右边的下边-->

        <div class="right-bottom">
            <div class="title-box">
                <!--<button id="setBtn"><img src="https://s1.ax1x.com/2020/05/15/Yryah6.png" alt="">设置</button>-->
            </div>
            <div class="data-box">
                <div class="settings-box">
                    <p><img src="https://s1.ax1x.com/2020/05/15/Yryw9K.png" alt="">今日值班：胡大海<span id="name_a"></span><span id="date_a"></span></p>
                    <p><img src="https://s1.ax1x.com/2020/05/15/YryGnJ.png" alt="">负责人：胡大海<span id="lea_a"></span></p>
                </div>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript" src="/assets/modular/system/bigscreen/js/rem.js"></script>
<script type="text/javascript" src="/assets/modular/system/bigscreen/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="/assets/modular/system/bigscreen/js/layer/layer.min.js"></script>
<script type="text/javascript" src="/assets/modular/system/bigscreen/js/layer/laydate/laydate.js"></script>
<script type="text/javascript" src="/assets/modular/system/bigscreen/js/echarts.min.js"></script>
<script type="text/javascript" src="/assets/modular/system/bigscreen/js/china.js"></script>
<script type="text/javascript" src="/assets/modular/system/bigscreen/js/data/guangdong.js"></script>
<script type="text/javascript" src="/assets/modular/system/bigscreen/js/base.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script>
<script src="https://cdn.bootcss.com/qs/6.5.1/qs.min.js"></script>
<script src="${ctxPath}/assets/common/libs/echarts/echartsTheme.js?v=${constants.getReleaseVersion()}"></script>

<!--地图部分-->
<script type="text/javascript" src="https://cache.amap.com/lbs/static/addToolbar.js"></script>
<script src="https://webapi.amap.com/maps?v=1.4.15&key=326c90e9d47f6a9710bc5e4594bb28f3&plugin=AMap.Autocomplete,AMap.PlaceSearch,AMap.Driving,AMap.Geocoder"></script>


<script type="text/javascript">
    var map = new AMap.Map("container", {
        mapStyle: 'amap://styles/darkblue', //设置地图的显示样式
        resizeEnable: true
    });
    AMap.service(["AMap.PlaceSearch"], function() {
        //构造地点查询类
        var placeSearch = new AMap.PlaceSearch({
            pageSize: 5, // 单页显示结果条数
            pageIndex: 1, // 页码
            city: "021", // 兴趣点城市
            citylimit: true,  //是否强制限制在设置的城市内搜索
            map: map, // 展现结果的地图实例
            panel: "panel", // 结果列表将在此容器中进行展示。
            autoFitView: true // 是否自动调整地图视野使绘制的 Marker点都处于视口的可见范围
        });
        //关键字查询
        placeSearch.search('联华超市');
    });
</script>
<script type="text/javascript">
    function iframeHeight() {
        document.getElementById('iframeId').height = "100%";
    }
</script>

<script type="text/javascript">
    $('document').ready(function () {
        $("body").css('visibility', 'visible');
        var localData = [$('#teacher').val(), $('#start').val() + '/' + $('#end').val(), $('#leader').val()]
        localStorage.setItem("data", localData);
        $('#conBtn').on('click', function () {
            localData = [$('#teacher').val(), $('#start').val() + '/' + $('#end').val(), $('#leader').val()]
            if (typeof (Storage) !== "undefined") {
                localStorage.setItem("data", localData);
                var arr = localStorage.getItem("data").split(',');
                $('#name_a').html(arr[0]);
                $('#date_a').html(arr[1]);
                $('#lea_a').html(arr[2]);
            }
        })
        $('#fangda').on('click', function () {
            if ($(this).siblings('ul').is(":hidden")) {
                $(this).addClass('active').siblings('ul').show();
            } else {
                $(this).removeClass('active').siblings('ul').hide();
            }
        })

        $('.modal-btn>li').on('click', function () {
            var index = $(this).index();
            if (index <= 2) {
                $('.container-screen').attr('style', 'visibility: visible').find('.pop-up').eq(index).attr('style', 'visibility: visible').siblings().attr('style', 'visibility: hidden');
            } else if (index > 2 && index < 5) {
                $('.container-screen').attr('style', 'visibility: visible').find('.pop-up').eq(3).attr('style', 'visibility: visible').siblings().attr('style', 'visibility: hidden');
                if (index != 3) {
                    $('.pop-data .ranking-box').hide();
                } else {
                    $('.pop-data .ranking-box').show();
                }
                $('.cont-div').eq(index - 3).attr('style', 'visibility: visible').siblings('.cont-div').attr('style', 'visibility: hidden');
            } else if (index == 5) {
                $('.container-screen').attr('style', 'visibility: visible').find('.pop-up').eq(3).attr('style', 'visibility: visible').siblings().attr('style', 'visibility: hidden');
                $('.pop-data .ranking-box').hide();
                if ($('#switchBtn').find('.active').data('datatype') == "income") {
                    $('#titles').html('收入数据');
                    $('#totalProfits').html('123,456.5元');
                    $('.cont-div').eq(2).attr('style', 'visibility: visible').siblings('.cont-div').attr('style', 'visibility: hidden');
                } else if ($('#switchBtn').find('.active').data('datatype') == 'expend') {
                    $('#titles').html('支出数据');
                    $('#totalProfits').html('32,111.4元');
                    $('.cont-div').eq(2).attr('style', 'visibility: visible').siblings('div').attr('style', 'visibility: hidden');
                }
            }
        })
    })
</script>


@}